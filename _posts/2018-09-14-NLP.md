---
layout:     post
title:      "NLP对话平台"
subtitle:   "对话平台"
date:       2018-09-14
author:     "msg"
header-img: "img/posts/04.jpg"
header-mask: 0.3
catalog:    true

tags:
    - NLP
    - 学习
    - 自然语言处理
    - 转载
---

> 智能问答系统：智能问答系统越来越受到重视，工作中也一直在一线进行架构设计和编码工作。如何从零开始构建一个完整的智能问答系统，如今也有了一点点经验。目前主要从事智能客服方面的工作，最近看了一篇文章，下面记录一下。

### 对话系统

对话系统分为任务导向型（task-oriented)对话系统和非任务导向型(non-task-oriented)对话系统(也称为聊天机器人)。一个完整的对话系统包括的技术内容如下：

![对话系统](/img/posts/dialog.jpg)

#### 任务导向型

1) 面向任务的系统旨在帮助用户完成实际具体的任务，例如帮助用户找寻商品，预订酒店餐厅，询问天气，播放音乐等。 

2) 面向任务的系统广泛采用的方法是将对话响应视为一条管道（pipeline)。系统首先理解人类所传达的信息，将其作为一种内部状态，然后根据对话状态的策略采取一系列相应的行为，最后将动作转化为自然语言的表现形式。

3) 虽然语言理解是通过统计模型来处理的，但是大多数已经部署的对话系统仍然使用***手工的特性或手工制定的规则***，用于状态和动作空间表示、意图检测和插槽填充。

#### 非任务导向型

1) 非任务导向的对话系统与人类交互，提供合理的回复和娱乐消遣功能，通常情况下主要集中在开放的领域与人交谈。虽然非任务导向的系统似乎在进行聊天，但是它在许多实际应用程序中都发挥了作用。

2) 数据显示，在网上购物场景中，近***80%***的话语是聊天信息，处理这些问题的方式与用户体验密切相关。

3) 非任务导向型主要有两种方法：

* 生成方法，例如序列到序列模型（seq2seq），在对话过程中产生合适的回复，**生成型聊天机器人**目前是研究界的一个热点，和检索型聊天机器人不同的是，它可以生成一种全新的回复，因此相对更为灵活，但它也有自身的缺点，比如有时候会出现语法错误，或者生成一些没有意义的回复；
* 基于检索的方法，从事先定义好的索引中进行搜索，学习从当前对话中选择回复。检索型方法的缺点在于它过于依赖数据质量，如果选用的数据质量欠佳，那就很有可能前功尽弃。 

### TF-IDF

下图是词频的计算方法：

![TF](/img/post/NLP/TF.png)

词频标准化的目的是把所有的词频在同一维度上分析。词频的标准化有两个标准，第一种情况，得出词汇较小，不便于分析。一般情况下，第二个标准更适用，因为能够使词频的值相对大点，便于分析。比如一本书出现一个词语100次，但整本书10万字，词频但是在一句话中出现5次，

下面是反文档频率的计算方法：

![IDF](/img/post/NLP/IDF.png)

针对这个公式，可能有人会有以下的疑问：

1.为什么+1？是为了处理分母为0的情况。假如所有的文章都不包含这个词，分子就为0，所以+1是为了防止分母为0的情况。

2.为什么要用log函数？log函数是单调递增，求log是为了归一化，保证反文档频率不会过大。

3.会出现负数？肯定不会，分子肯定比分母大。

 TF-IDF = 计算的词频(TF)*计算的反文档频率(IDF)。通过公式可以知道，TF-IDF与在该文档中出现的次数成正比，与包含该词的文档数成反比。
 
在知道TF-IDF后，先抛出两个小实践：

1.利用TF-IDF计算相似文章:

* 使用TF-IDF算法，找出两篇文章的关键词
* 每篇文章各取出若干个关键词（比如20个），合并成一个集合，计算每篇文章对于这个集合中的词的词频（为了避免文章长度的差异，可以使用相对词频）
* 生成两篇文章各自的词频向量
* 计算两个向量的余弦相似度，值越大就表示越相似

文章的信息都包含在句子中，有些句子包含的信息多，有些句子包含的信息少。 "自动摘要"就是要找出那些包含信息最多的句子。句子的信息量用"关键词"来衡量。如果包含的关键词越多，就说明这个句子越重要。只要关键词之间的距离小于“门槛值” ，它们就被认为处于同一个簇之中，如果两个关键词之间有5个以上的其他词，就可以把这两个关键词分在两个簇。下一步，对于每个簇，都计算它的重要性分值

![cluster](/img/post/NLP/cluster.png)

有时候，为了方便实际的操作可以化简为不考虑簇的用法，
* 计算原始文本的词频，生成词频数组 [(2, '你好'), (10, '大数据'), (4, '智能'), (100, '的')...]
* 过滤停用词，得出新的词频数组  [(2, '你好'), (10, '大数据'), (4, '智能')...]
* 按照词频进行排序 [(2, '你好'), (4, '智能'), (10, '大数据')...]
* 将文章分为句子
* 选择关键词首先出现的句子 (一般文章首段和最后一段，每段的首句和末句是比较重要的)
* 将选中的句子按照出现顺序，组成摘要
